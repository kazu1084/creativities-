<%= flash[:notice] %>
<h1>Review送信フォーム</h1>
<%= form_with model: @review, url: client_contractor_reviews_path(@contractor)  do |f| %>
  <div class="form-group row" id="star">
      <%= f.label :score,'評価 ', class:'col-md-3 col-form-label' %>
      <%= f.hidden_field :score, id: :review_star, value: nil, class: "form-control" %>
      <div id="post_raty"></div>
  </div>
  <script>
  $(document).on('turbolinks:load',function(){
    let elem = document.querySelector('#post_raty')
    if(elem == null) return;

    elem.innnerHTML = ""
    let opt = {
      scoreName: 'review[score]',
      size     : 36,
      starOff:  '<%= asset_path('star-off.png') %>',
      starOn : '<%= asset_path('star-on.png') %>',
      starHalf: '<%= asset_path('star-half.png') %>',
      half: true, };
      raty(elem,opt);
  });
  </script>

  <div class="form-group row">
    <%= f.label :body, '評価コメント ', class:'col-md-3 col-form-label' %>
    <div class="col-md-9">
      <%= f.text_area :body, class: "form-control", rows: "4",placeholder:'コメントを入力' %>
    </div>
  </div>
  <div class="form-group row justify-content-end">
      <div class="col-md-9">
        <%= f.submit '送信する', class:"btn btn-success" %>
      </div>
  </div>
<% end %>